<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Compress files online for free. Compress images, documents, and other files to reduce size. Fast and secure file compressor with high compression ratio.">
    <link rel="canonical" href="https://n-dizi.in/file-compressor.html">
    <title>File Compressor - ToolHub</title>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VBJFDCH3MH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-VBJFDCH3MH');
    </script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .faq-section {
            max-width: 800px;
            margin: 40px auto;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .faq-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        .faq-section p {
            margin: 15px 0;
            line-height: 1.6;
            color: #34495e;
        }
        .faq-section strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>File Compressor</h1>
        <input type="file" id="fileInput" accept="application/pdf">
        <input type="range" id="compressionLevel" min="0" max="100" value="50">
        <label for="compressionLevel">Compression: <span id="compressionValue">50%</span></label>
        <button onclick="compressFile()">Compress</button>
        <div id="status"></div>
        <div id="result"></div>
        <div class="instructions">
            <p><strong>How to Use:</strong></p>
            <ul>
                <li>Upload a PDF file (max 50MB) using the "Choose File" button.</li>
                <li>Adjust the compression slider (0% = smallest size, 100% = best quality).</li>
                <li>Click "Compress" to adjust the PDF sizeâ€”progress will show in percentage.</li>
                <li>Download the adjusted PDF file from the link.</li>
            </ul>
        </div>
        
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="1234567890"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <div class="faq-section">
            <h3>Frequently Asked Questions</h3>
            <p><strong>Q: What file types can I compress?</strong></p>
            <p>A: Our File Compressor currently supports PDF files only. We're working to add support for more file types in the future.</p>
            
            <p><strong>Q: What is the maximum file size I can upload?</strong></p>
            <p>A: You can upload PDF files up to 50MB in size. Larger files may be rejected to ensure optimal performance.</p>
            
            <p><strong>Q: How does the compression slider work?</strong></p>
            <p>A: The compression slider ranges from 0% (smallest file size, lower quality) to 100% (best quality, larger size). Adjust it to find the right balance for your needs.</p>
            
            <p><strong>Q: Will my compressed PDF lose quality?</strong></p>
            <p>A: Compression does affect quality to some extent. Higher compression (lower percentage) reduces file size more but may result in lower image quality. We recommend testing different settings.</p>
            
            <p><strong>Q: Is my file deleted after compression?</strong></p>
            <p>A: Yes, your files are processed securely and are not stored on our servers after the compression is complete.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <script>
        const { jsPDF } = window.jspdf;
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js';
        const statusDiv = document.getElementById('status');
        const resultDiv = document.getElementById('result');
        const compressionLevel = document.getElementById('compressionLevel');
        const compressionValue = document.getElementById('compressionValue');

        compressionLevel.oninput = () => {
            compressionValue.textContent = `${compressionLevel.value}%`;
        };

        async function compressFile() {
            const fileInput = document.getElementById('fileInput');

            if (!fileInput.files[0]) {
                statusDiv.innerHTML = "Please select a PDF file.";
                return;
            }

            const file = fileInput.files[0];
            if (file.size > 50 * 1024 * 1024) {
                statusDiv.innerHTML = "File too large (max 50MB).";
                return;
            }

            if (file.type !== 'application/pdf') {
                statusDiv.innerHTML = "Please upload a PDF file only.";
                return;
            }

            statusDiv.innerHTML = "Processing (0% complete)...";
            try {
                const quality = compressionLevel.value / 100;
                const arrayBuffer = await file.arrayBuffer();
                const pdfDoc = await pdfjsLib.getDocument(arrayBuffer).promise;
                const totalPages = pdfDoc.numPages;
                const newPdf = new jsPDF();

                for (let i = 1; i <= totalPages; i++) {
                    const page = await pdfDoc.getPage(i);
                    const viewport = page.getViewport({ scale: 1 });
                    const canvas = document.createElement('canvas');
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    const ctx = canvas.getContext('2d');
                    await page.render({ canvasContext: ctx, viewport }).promise;
                    const imgData = canvas.toDataURL('image/jpeg', quality);
                    if (i > 1) newPdf.addPage();
                    newPdf.addImage(imgData, 'JPEG', 0, 0, viewport.width, viewport.height);

                    const progress = Math.round((i / totalPages) * 100);
                    statusDiv.innerHTML = `Processing (${progress}% complete)...`;
                }

                const blob = newPdf.output('blob');
                const url = URL.createObjectURL(blob);
                resultDiv.innerHTML = `<a href="${url}" download="compressed.pdf">Download PDF (${(blob.size / 1024).toFixed(2)} KB)</a>`;
                statusDiv.innerHTML = "Compression complete!";
                
                // Track compression event
                gtag('event', 'compress_file', {
                    'event_category': 'Tool Usage',
                    'event_label': 'File Compressor'
                });
            } catch (error) {
                statusDiv.innerHTML = "Error: " + error.message;
                resultDiv.innerHTML = "";
            }
        }
    </script>
    <script src="chatbot.js"></script>
    <div id="footer"></div>
    <script>
        fetch("./footer.html")
            .then(res => res.text())
            .then(data => document.getElementById("footer").innerHTML = data);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Passport Photo Maker</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(135deg,#667eea,#764ba2);
  min-height:100vh;
  padding:10px;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  border-radius:16px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  overflow:hidden;
}
.header{
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:#fff;
  padding:20px;
  text-align:center;
}
.header h1{font-size:22px}
.header p{font-size:13px;opacity:.9}

.content{padding:20px}

.upload-section{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-bottom:15px;
}
.upload-btn,.camera-btn{
  border:2px dashed #667eea;
  border-radius:12px;
  padding:28px 15px;
  text-align:center;
  cursor:pointer;
  background:#f6f7ff;
  transition:.25s;
}
.upload-btn:hover,.camera-btn:hover{
  background:#eef0ff;
  transform:scale(1.02);
}
.upload-btn .icon,.camera-btn .icon{font-size:38px}
.upload-btn h3,.camera-btn h3{font-size:15px;margin:6px 0}
.upload-btn p,.camera-btn p{font-size:12px;color:#555}

input[type=file]{display:none}

.settings{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  margin-bottom:15px;
}
.setting{
  background:#f8f9fa;
  border:2px solid #e5e7eb;
  border-radius:10px;
  padding:10px;
}
.setting label{
  display:block;
  font-weight:600;
  font-size:12px;
  margin-bottom:5px;
}
.setting select,
.setting input[type=color],
.setting input[type=range]{
  width:100%;
}
.value{text-align:center;font-size:12px;font-weight:600;color:#667eea}

.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:25px;
  font-weight:700;
  font-size:15px;
  cursor:pointer;
  background:linear-gradient(135deg,#667eea,#764ba2);
  color:#fff;
  box-shadow:0 8px 25px rgba(102,126,234,.45);
}
.btn:disabled{opacity:.5;cursor:not-allowed}

.result{display:none;text-align:center;margin-top:20px}
.result canvas{
  max-width:100%;
  border-radius:12px;
  box-shadow:0 12px 40px rgba(0,0,0,.2);
}

.features{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
}
.features div{
  font-size:12px;
  font-weight:600;
  color:#2c3e50;
}
.features div::before{
  content:"‚úì ";
  color:#fff;
  background:#667eea;
  border-radius:50%;
  padding:2px 6px;
  margin-right:6px;
}

.camera-modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  z-index:999;
}
.camera-box{
  background:#fff;
  max-width:420px;
  margin:40px auto;
  padding:15px;
  border-radius:12px;
  text-align:center;
}
.camera-box video{width:100%;border-radius:10px}
.camera-box button{
  margin:10px 5px;
  padding:10px 18px;
  border:none;
  border-radius:20px;
  font-weight:700;
  cursor:pointer;
}
.capture{background:#16a085;color:#fff}
.close{background:#e74c3c;color:#fff}

@media(max-width:600px){
  .upload-section,.settings{grid-template-columns:1fr}
  .features{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>üéØ Passport Photo Maker</h1>
    <p>Upload / Camera ‚Ä¢ Auto Crop ‚Ä¢ Background Replace ‚Ä¢ Print Ready</p>
  </div>

  <div class="content">

    <div class="upload-section">
      <div class="upload-btn" id="uploadBtn">
        <div class="icon">üìÅ</div>
        <h3>Upload Photo</h3>
        <p>PNG / JPG</p>
      </div>
      <div class="camera-btn" id="cameraBtn">
        <div class="icon">üì∏</div>
        <h3>Take Photo</h3>
        <p>Mobile Camera</p>
      </div>
    </div>

    <input type="file" id="fileInput" accept="image/*">

    <div class="settings">
      <div class="setting">
        <label>üìê Photo Size</label>
        <select id="size">
          <option value="300,400">Passport (35√ó45mm)</option>
          <option value="354,472">Visa</option>
        </select>
      </div>

      <div class="setting">
        <label>üé® Background</label>
        <input type="color" id="bg" value="#ff0000">
      </div>

      <div class="setting">
        <label>üìã Copies</label>
        <select id="copies">
          <option>4</option>
          <option selected>6</option>
          <option>8</option>
        </select>
      </div>

      <div class="setting">
        <label>üñº Border</label>
        <input type="range" id="border" min="0" max="8" value="3">
        <div class="value"><span id="bVal">3</span>px</div>
      </div>
    </div>

    <button class="btn" id="generate" disabled>üöÄ Generate Photos</button>

    <div class="result" id="result">
      <canvas id="canvas"></canvas>
      <div class="features">
        <div>Auto center crop</div>
        <div>Solid background</div>
        <div>Black border</div>
        <div>Equal gap (print ready)</div>
      </div>
    </div>
  </div>
</div>

<!-- Camera -->
<div class="camera-modal" id="cameraModal">
  <div class="camera-box">
    <video id="video" autoplay playsinline></video>
    <div>
      <button class="capture" id="capture">Capture</button>
      <button class="close" id="closeCam">Close</button>
    </div>
  </div>
</div>

<script>
const uploadBtn=document.getElementById("uploadBtn");
const fileInput=document.getElementById("fileInput");
const cameraBtn=document.getElementById("cameraBtn");
const modal=document.getElementById("cameraModal");
const video=document.getElementById("video");
const capture=document.getElementById("capture");
const closeCam=document.getElementById("closeCam");
const generate=document.getElementById("generate");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const result=document.getElementById("result");

let img=new Image(),stream;

uploadBtn.onclick=()=>fileInput.click();
fileInput.onchange=e=>loadImage(e.target.files[0]);

cameraBtn.onclick=async()=>{
  modal.style.display="block";
  stream=await navigator.mediaDevices.getUserMedia({video:true});
  video.srcObject=stream;
};
closeCam.onclick=()=>{
  modal.style.display="none";
  if(stream)stream.getTracks().forEach(t=>t.stop());
};
capture.onclick=()=>{
  const c=document.createElement("canvas");
  c.width=video.videoWidth;
  c.height=video.videoHeight;
  c.getContext("2d").drawImage(video,0,0);
  img.src=c.toDataURL("image/png");
  modal.style.display="none";
  stream.getTracks().forEach(t=>t.stop());
  generate.disabled=false;
};

function loadImage(file){
  const r=new FileReader();
  r.onload=()=>{img.src=r.result;generate.disabled=false;}
  r.readAsDataURL(file);
}

generate.onclick=()=>{
  const [pw,ph]=document.getElementById("size").value.split(",").map(Number);
  const copies=parseInt(document.getElementById("copies").value);
  const bg=document.getElementById("bg").value;
  const border=parseInt(document.getElementById("border").value);
  const gap=20;

  const cols=Math.ceil(Math.sqrt(copies));
  const rows=Math.ceil(copies/cols);

  canvas.width=cols*(pw+2*border)+(cols+1)*gap;
  canvas.height=rows*(ph+2*border)+(rows+1)*gap;

  ctx.fillStyle="#fff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  let i=0;
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      if(i>=copies)break;
      const x=gap+c*(pw+2*border+gap);
      const y=gap+r*(ph+2*border+gap);

      ctx.fillStyle=bg;
      ctx.fillRect(x,y,pw+2*border,ph+2*border);

      ctx.globalCompositeOperation="source-over";

      // auto center crop
      const ar=img.width/img.height;
      let sx=0,sy=0,sw=img.width,sh=img.height;
      if(ar>pw/ph){
        sw=img.height*(pw/ph);
        sx=(img.width-sw)/2;
      }else{
        sh=img.width*(ph/pw);
        sy=(img.height-sh)/2;
      }

      ctx.drawImage(img,sx,sy,sw,sh,x+border,y+border,pw,ph);

      ctx.strokeStyle="#000";
      ctx.lineWidth=border;
      ctx.strokeRect(x+border/2,y+border/2,pw+border,ph+border);

      i++;
    }
  }

  result.style.display="block";
};
</script>
</body>
  </html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passport Photo Maker</title>
    <style>
        /* ... рдкрд┐рдЫрд▓рд╛ CSS рдХреЛрдб рд╡рд╣реА рд░рдЦреЗрдВ ... */
    </style>
</head>
<body>
    <h1 style="text-align: center; color: #2c3e50;">ЁЯУ╖ рдкрд╛рд╕рдкреЛрд░реНрдЯ рдлреЛрдЯреЛ рдореЗрдХрд░</h1>
    
    <div class="container">
        <!-- рдирд┐рдпрдВрддреНрд░рдг рдкреИрдирд▓ -->
        <div class="controls">
            <!-- рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рд╕реЗрдХреНрд╢рди -->
            <div class="controls-group">
                <h3>ЁЯУд рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ</h3>
                <div class="upload-area">
                    <button onclick="document.getElementById('fileInput').click()">
                        рдлрд╝рд╛рдЗрд▓ рдЪреБрдиреЗрдВ
                    </button>
                    <input type="file" id="fileInput" accept=".jpg,.jpeg,.png" hidden>
                </div>
                <img id="imagePreview" class="image-preview" alt="рдЕрдкрд▓реЛрдб рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди">
            </div>

            <!-- рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рд░рдВрдЧ рдЪрдпрди -->
            <div class="controls-group">
                <h3>ЁЯОи рдкреГрд╖реНрдарднреВрдорд┐ рд░рдВрдЧ</h3>
                <div class="color-swatches">
                    <div class="color-swatch active" style="background: #ffffff" 
                         onclick="setBackgroundColor('#ffffff')"></div>
                    <div class="color-swatch" style="background: #007bff" 
                         onclick="setBackgroundColor('#007bff')"></div>
                    <div class="color-swatch" style="background: #dc3545" 
                         onclick="setBackgroundColor('#dc3545')"></div>
                    <input type="color" id="colorPicker">
                </div>
            </div>

            <!-- рд╕рдорд╛рдпреЛрдЬрди рдирд┐рдпрдВрддреНрд░рдг -->
            <div class="controls-group">
                <h3>тЪЩя╕П рд╕рдорд╛рдпреЛрдЬрди</h3>
                <div class="slider-container">
                    <label>рдХреНрд╖реИрддрд┐рдЬ рд╕реНрдерд┐рддрд┐</label>
                    <input type="range" id="xPosition" min="-100" max="100" value="0">
                </div>
                <div class="slider-container">
                    <label>рдКрд░реНрдзреНрд╡рд╛рдзрд░ рд╕реНрдерд┐рддрд┐</label>
                    <input type="range" id="yPosition" min="-100" max="100" value="0">
                </div>
                <div class="slider-container">
                    <label>рдЬрд╝реВрдо рд╕реНрддрд░</label>
                    <input type="range" id="scale" min="50" max="150" value="100">
                </div>
            </div>

            <!-- рдбрд╛рдЙрдирд▓реЛрдб рдмрдЯрди -->
            <div class="controls-group">
                <button onclick="downloadPhoto()" style="width: 100%;">
                    ЁЯУе JPG рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
                </button>
            </div>
        </div>

        <!-- рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди рдХреНрд╖реЗрддреНрд░ -->
        <div class="preview-section">
            <div class="preview-container">
                <canvas id="previewCanvas"></canvas>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('previewCanvas');
        const ctx = canvas.getContext('2d');
        let uploadedImage = null;

        // рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рд╣реИрдВрдбрд▓рд░
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (event) => {
                const img = new Image();
                img.onload = () => {
                    uploadedImage = img;
                    updateCanvas();
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        // рдХреИрдирд╡рд╛рд╕ рдЕрдкрдбреЗрдЯ рдлрд╝рдВрдХреНрд╢рди
        function updateCanvas() {
            if (!uploadedImage) return;

            // рдХреИрдирд╡рд╛рд╕ рдЖрдХрд╛рд░ рд╕реЗрдЯ рдХрд░реЗрдВ
            canvas.width = 600;
            canvas.height = 600;

            // рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рднрд░реЗрдВ
            ctx.fillStyle = document.getElementById('colorPicker').value;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // рдЗрдореЗрдЬ рдкреЛрдЬреАрд╢рди рдФрд░ рд╕реНрдХреЗрд▓ рдХреИрд▓рдХреБрд▓реЗрдЯ рдХрд░реЗрдВ
            const scale = document.getElementById('scale').value / 100;
            const xOffset = parseInt(document.getElementById('xPosition').value);
            const yOffset = parseInt(document.getElementById('yPosition').value);
            
            const imgWidth = uploadedImage.width * scale;
            const imgHeight = uploadedImage.height * scale;
            
            // рдЗрдореЗрдЬ рдХреЛ рдХреЗрдВрджреНрд░ рдореЗрдВ рд░рдЦреЗрдВ
            const x = (canvas.width - imgWidth)/2 + xOffset;
            const y = (canvas.height - imgHeight)/2 + yOffset;

            // рдЗрдореЗрдЬ рдбреНрд░реЙ рдХрд░реЗрдВ
            ctx.drawImage(uploadedImage, x, y, imgWidth, imgHeight);
        }

        // рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рд░рдВрдЧ рд╕реЗрдЯ рдХрд░реЗрдВ
        function setBackgroundColor(color) {
            document.getElementById('colorPicker').value = color;
            updateCanvas();
        }

        // рдбрд╛рдЙрдирд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди
        function downloadPhoto() {
            if (!uploadedImage) {
                alert('рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ');
                return;
            }
            const link = document.createElement('a');
            link.download = 'passport-photo.jpg';
            link.href = canvas.toDataURL('image/jpeg');
            link.click();
        }

        // рдЗрд╡реЗрдВрдЯ рд▓рд┐рд╕рдирд░реНрд╕
        document.querySelectorAll('input[type="range"], #colorPicker').forEach(element => {
            element.addEventListener('input', updateCanvas);
        });

        // рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реЗрдЯрдЕрдк
        setBackgroundColor('#ffffff');
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Passport Photo Maker â€“ ToolHub</title>

<style>
body{
  margin:0;
  padding:20px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f2f4f7;
  display:flex;
  justify-content:center;
}
.container{
  background:#fff;
  max-width:900px;
  width:100%;
  padding:24px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}
h2{text-align:center;margin-bottom:20px}

.controls{
  max-width:420px;
  margin:auto;
  display:grid;
  gap:14px;
}
label{
  font-size:14px;
  font-weight:600;
}
input,select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  display:block;
  margin:20px auto;
  padding:14px 32px;
  border:none;
  border-radius:30px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(135deg,#2563eb,#1e40af);
}
button:hover{opacity:.9}

canvas{
  display:block;
  margin:20px auto;
  max-width:100%;
  border:2px dashed #2563eb;
  border-radius:10px;
}

.info{
  text-align:center;
  font-size:14px;
  opacity:.85;
}
</style>
</head>

<body>
<div class="container">

<h2>ðŸ“¸ Passport Photo Maker</h2>

<div class="controls">
  <label>Upload Photo
    <input type="file" id="imageInput" accept="image/*">
  </label>

  <label>Background Color
    <input type="color" id="bgColor" value="#ff0000">
  </label>

  <label>Photo Size
    <select id="photoSize">
      <option value="300x400">Passport (35Ã—45 mm)</option>
      <option value="354x472">Visa</option>
      <option value="413x531">ID Card</option>
    </select>
  </label>

  <label>Number of Copies
    <select id="copies">
      <option>1</option>
      <option>2</option>
      <option selected>4</option>
      <option>6</option>
      <option>8</option>
      <option>12</option>
    </select>
  </label>
</div>

<button id="generateBtn">Generate Photo</button>

<canvas id="canvas"></canvas>

<p class="info">
âœ” Auto center crop  
âœ” Solid background replace  
âœ” Black border  
âœ” Equal gap (print & cut ready)
</p>

</div>

<script>
const img = new Image();
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const GAP = 20;
const BORDER = 3;

document.getElementById("imageInput").addEventListener("change",e=>{
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => img.src = ev.target.result;
  reader.readAsDataURL(file);
});

document.getElementById("generateBtn").onclick = ()=>{
  if(!img.src){
    alert("Please upload a photo");
    return;
  }

  const [pw,ph] = document.getElementById("photoSize").value.split("x").map(Number);
  const copies = +document.getElementById("copies").value;
  const bg = document.getElementById("bgColor").value;

  const cols = Math.ceil(Math.sqrt(copies));
  const rows = Math.ceil(copies / cols);

  canvas.width = cols*pw + (cols-1)*GAP;
  canvas.height = rows*ph + (rows-1)*GAP;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // --- prepare single passport photo ---
  const off = document.createElement("canvas");
  off.width = pw;
  off.height = ph;
  const octx = off.getContext("2d");

  // background
  octx.fillStyle = bg;
  octx.fillRect(0,0,pw,ph);

  // center crop (safe)
  const imgRatio = img.width / img.height;
  const targetRatio = pw / ph;

  let sx=0, sy=0, sw=img.width, sh=img.height;
  if(imgRatio > targetRatio){
    sw = sh * targetRatio;
    sx = (img.width - sw) / 2;
  }else{
    sh = sw / targetRatio;
    sy = (img.height - sh) / 2;
  }

  octx.drawImage(img, sx, sy, sw, sh, 0, 0, pw, ph);

  // border
  octx.strokeStyle = "#000";
  octx.lineWidth = BORDER;
  octx.strokeRect(0,0,pw,ph);

  // --- grid output ---
  let count = 0;
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      if(count >= copies) return;
      ctx.drawImage(off, c*(pw+GAP), r*(ph+GAP));
      count++;
    }
  }
};
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Universal Translator - Google Translate API</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; color: #333; }
    .container { max-width: 800px; margin: 40px auto; padding: 20px; background: #fff; border-radius: 10px;
                 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
    textarea, select, button { width: 100%; font-size: 16px; padding: 10px; margin-top: 10px;
                                border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; }
    #char-count { font-size: 14px; color: #666; margin-top: 5px; }
    .notification { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
                    background-color: #4bb543; color: white; padding: 10px 20px;
                    border-radius: 5px; display: none; }
    .notification.show { display: block; }
    #copy-btn { background-color: #007bff; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Universal Translator</h1>
    <p>Translate up to 5000 characters with Google Translate API</p>
    <select id="source-language">
      <option value="auto">Detect Language</option>
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="bn">Bengali</option>
      <option value="ta">Tamil</option>
      <option value="te">Telugu</option>
      <option value="ur">Urdu</option>
      <option value="gu">Gujarati</option>
      <option value="kn">Kannada</option>
      <option value="ml">Malayalam</option>
      <option value="mr">Marathi</option>
      <option value="pa">Punjabi</option>
      <option value="or">Odia</option>
      <option value="ne">Nepali</option>
    </select>
    <select id="target-language">
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="bn">Bengali</option>
      <option value="ta">Tamil</option>
      <option value="te">Telugu</option>
      <option value="ur">Urdu</option>
      <option value="gu">Gujarati</option>
      <option value="kn">Kannada</option>
      <option value="ml">Malayalam</option>
      <option value="mr">Marathi</option>
      <option value="pa">Punjabi</option>
      <option value="or">Odia</option>
      <option value="ne">Nepali</option>
    </select>
    <textarea id="source-text" placeholder="Enter text here..."></textarea>
    <div id="char-count">0 words | 0 characters</div>
    <button id="translate-btn">Translate</button>
    <textarea id="translated-text" readonly placeholder="Translated text will appear here..."></textarea>
    <button id="copy-btn">ðŸ“‹ Copy</button>
  </div>
  <div class="notification" id="notification"></div>

  <script>
    const apiKey = "AIzaSyAvgONtzRjYtBCJVI_2g9lOWWE-lBxl3Qo";

    document.addEventListener('DOMContentLoaded', () => {
      const sourceText = document.getElementById("source-text");
      const translateBtn = document.getElementById("translate-btn");
      const translatedText = document.getElementById("translated-text");
      const copyBtn = document.getElementById("copy-btn");
      const charCount = document.getElementById("char-count");
      const notification = document.getElementById("notification");

      sourceText.addEventListener("input", () => {
        const text = sourceText.value.trim();
        const wordCount = text.split(/\s+/).filter(Boolean).length;
        charCount.textContent = `${wordCount} words | ${text.length} characters`;
      });

      translateBtn.addEventListener("click", async () => {
        const text = sourceText.value.trim();
        const from = document.getElementById("source-language").value;
        const to = document.getElementById("target-language").value;

        if (!text) return showNotification("Please enter some text.", "error");

        translatedText.value = "Translating...";
        const chunks = splitIntoChunks(text, 5000);
        let translated = "";

        for (let chunk of chunks) {
          const body = {
            q: chunk,
            source: from === "auto" ? undefined : from,
            target: to,
            format: "text"
          };

          try {
            const res = await fetch(
              `https://translation.googleapis.com/language/translate/v2?key=${apiKey}`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(body)
              }
            );
            const data = await res.json();
            translated += (data.data?.translations[0]?.translatedText || "") + " ";
          } catch (err) {
            return showNotification("Translation failed.", "error");
          }
        }

        translatedText.value = translated.trim();
        showNotification("Translation complete", "success");
      });

      copyBtn.addEventListener("click", () => {
        navigator.clipboard.writeText(translatedText.value)
          .then(() => {
            copyBtn.textContent = "âœ… Copied!";
            setTimeout(() => copyBtn.textContent = "ðŸ“‹ Copy", 2000);
          })
          .catch(() => showNotification("Failed to copy.", "error"));
      });

      function showNotification(msg, type) {
        notification.textContent = msg;
        notification.style.backgroundColor = type === "error" ? "#dc3545" : "#4bb543";
        notification.classList.add("show");
        setTimeout(() => notification.classList.remove("show"), 3000);
      }

      function splitIntoChunks(text, maxLen) {
        const sentences = text.match(/[^.!?]+[.!?]*\s*/g) || [text];
        let chunks = [], current = "";
        for (let sentence of sentences) {
          if ((current + sentence).length <= maxLen) {
            current += sentence;
          } else {
            chunks.push(current);
            current = sentence;
          }
        }
        if (current) chunks.push(current);
        return chunks;
      }
    });
  </script>
</body>
</html>
